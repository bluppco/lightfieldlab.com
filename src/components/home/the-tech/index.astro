---
// IMPORT ASTRO LAYOUTS
import Container from "@/layouts/container/index.astro"

// IMPORT ASTRO COMPONENTS
import TechImageTitle from "@/components/home/the-tech/tech-titles/index.astro"

// IMPORT ASTRO ATOMS
import LightLine from "@/atoms/light-line/index.astro"
import ParagraphThreexlWhite from "@/atoms/paragraphs/white/three-xl/index.astro"
import HeadingOneWhite from "@/atoms/headings/one/white/index.astro"

// HARDCODED DATA
const data = {
    description_first: "SolidLight is unlike anything youâ€™ve experienced before. This is beyond holograms.",
    description_second: "SolidLight is the next generation of display combining unprecedented resolution and density to accurately project dimensional wavefronts to form objects that escape the screen and merge with reality.",
    title: "The Tech",
}
---

<section class="bg-black py-12">
    <Container>
        <div class="flex flex-col gap-10 my-10">
            <div>
                <HeadingOneWhite>{ data.title }</HeadingOneWhite>
            </div>
            <div>
                <LightLine/>
            </div>
            <div class="grid grid-cols-3">
                <div class="flex flex-col gap-8 col-span-3 md:col-span-2">
                    <ParagraphThreexlWhite>{ data.description_first }</ParagraphThreexlWhite>
                    <ParagraphThreexlWhite>{ data.description_second }</ParagraphThreexlWhite>
                </div>
            </div>
            <div id="animation-container" class="md:px-16">
                <div class="">
                    <img
                        alt="the-tech"
                        id="the-tech-image"
                        src="/images/the-tech-images/the-tech.jpg"
                    />
                </div>
            </div>
            <div class="md:hidden flex flex-col gap-6">
                <TechImageTitle
                    description="High Performance Proprietary FPGA, Electronics, Wall & Display Controllers"
                    number="1"
                />
                <TechImageTitle
                    description="Photonics Array & Nanoparticle Polymer Fused Surface Energy Relay"
                    number="2"
                />
                <TechImageTitle
                    description="Complex Phaseguide Modulation Surface"
                    number="3"
                />
            </div>
        </div>
    </Container>
</section>

<script>
    const images = [
        '/images/the-tech-images/frame-1.jpg',
        '/images/the-tech-images/frame-2.jpg',
        '/images/the-tech-images/frame-3.jpg',
        '/images/the-tech-images/frame-4.jpg',
        '/images/the-tech-images/frame-5.jpg',
        '/images/the-tech-images/frame-6.jpg',
        '/images/the-tech-images/frame-7.jpg',
        '/images/the-tech-images/frame-8.jpg',
        '/images/the-tech-images/frame-9.jpg',
        '/images/the-tech-images/frame-10.jpg',
        '/images/the-tech-images/frame-12.jpg',
        '/images/the-tech-images/frame-13.jpg',
        '/images/the-tech-images/frame-14.jpg',
        '/images/the-tech-images/frame-15.jpg',
        '/images/the-tech-images/frame-16.jpg',
        '/images/the-tech-images/frame-17.jpg',
        '/images/the-tech-images/frame-18.jpg',
        '/images/the-tech-images/frame-19.jpg',
        '/images/the-tech-images/frame-20.jpg',
        '/images/the-tech-images/frame-21.jpg',
        '/images/the-tech-images/frame-22.jpg',
        '/images/the-tech-images/frame-23.jpg',
        '/images/the-tech-images/frame-24.jpg',
        '/images/the-tech-images/frame-25.jpg',
        '/images/the-tech-images/frame-26.jpg',
        '/images/the-tech-images/frame-27.jpg',
        '/images/the-tech-images/frame-28.jpg',
        '/images/the-tech-images/frame-29.jpg',
        '/images/the-tech-images/frame-31.jpg',
        '/images/the-tech-images/frame-32.jpg',
        '/images/the-tech-images/the-tech.jpg',
    ];

    window.addEventListener('scroll', () => {
        const container = document.getElementById('animation-container');
        const image = document.getElementById('the-tech-image') as HTMLImageElement;
        const containerTop = container.offsetTop;
        const containerHeight = container.offsetHeight;
        const scrollTop = window.scrollY;
        const windowHeight = window.innerHeight;
        const startScroll = containerTop - windowHeight;
        const endScroll = containerTop + containerHeight - 700;
        
        if (scrollTop >= startScroll && scrollTop <= endScroll) {
            const scrollRange = endScroll - startScroll;
            const totalImages = images.length;
            let scrollPosition = scrollTop - startScroll;
            if (scrollPosition < 0) scrollPosition = 0;
            const imageIndex = Math.floor((scrollPosition / scrollRange) * (totalImages - 1));
            // UPDATE THE SCR OF IMAGE
            image.src = images[imageIndex];
        } else if (scrollTop > endScroll) {
            // UPDATE THE SCR OF IMAGE TO LAST IMAGE
            image.src = images[images.length - 1];
        }
    });
</script>
