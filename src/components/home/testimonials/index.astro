---

// IMPORT ATOMS
import IconButton from "@/atoms/buttons/icon/index.astro"

---

<div class="bg-black text-white relative flex flex-col items-center justify-center min-h-screen p-4">
	<div id="prevBtn" class="absolute left-4 top-1/2">
		<IconButton>arrow_back_ios</IconButton>
	</div>
	<div id="nextBtn" class="absolute right-4 top-1/2">
		<IconButton>arrow_forward_ios</IconButton>
	</div>
	<div id="carousel"class="flex overflow-x-hidden scroll-snap-x-mandatory scroll-smooth w-full">
		<!-- Carousel items will be inserted here by JavaScript -->
	</div>
	<div id="dots" class="absolute bottom-8 flex gap-2">
		<!-- Dots will be inserted here by JavaScript -->
	</div>
</div>

<script>
	const testimonials = [
		{
			quote: "Light Field Lab has the potential to change the way we view and interact with media. This is essentially the holy grail of optical display technology, enabling things that seem like science fiction to be possible today.",
			name: "Vinod Khosla, CEO Khosla Ventures",
		},
		{
			quote: "Light Field Lab is positioned to change the game for display. The ability to replace physical objects with photons of light will impact every industry",
			name: "Anton Simunovic, Chief Investor Officer, Alumni Ventures Group",
		},
		{
			quote: "Verizon's new 5G network features the higher bandwidth, low latency, and speed/throughput to deliver next generation content. We're excited about our new Verizon Ventures investment in Light Field Lab as they bring such innovation to delivering content via next-gen networks through their displays.",
			name: "Kristina Serafim, Investment Director at Verizon Ventures",
		},
		{
			quote: "Light Field Lab's holographic display technologies enable entirely new business opportunities across consumer and enterprise markets. Light Field Lab has the leadership and technical expertise to bring this vision of the holographic future to life.",
			name: "Ingo Ramesohl, Managing Director of Bosch Venture Capital",
		},
		{
			quote: "Light Field Lab's holographic displays are the most exciting new technology we have seen in the entertainment space to date. We are thrilled to meaningfully participate in their Series A and are well positioned to help them align with the industry's top content creators to accelerate holographic media distribution on next-generation networks.",
			name: "Ankur Prakash, VP of Liberty Global Ventures",
		},
		{
			quote: "Light Field Lab's holographic technologies are a new frontier in the display space. The team has created something that was once considered science fiction, but now exists in reality. This enables new business opportunities and unlocks digital environments that no one has seen before.",
			name: "Huang Lee, Managing Partner at Taiwania Capital",
		},
		{
			quote: "Light Field Lab's technologies not only enable the creation of real holographic objects, but also new innovations for automotive lighting that helps us harness light to transform automotive interfaces and illumination systems.",
			name: "Dr. Michael Kleinkes, Member of the Executive Board and Head of Lighting Development at HELLA",
		},
	]

	let currentIndex = 0
	const carousel = document.getElementById("carousel")
	const dotsContainer = document.getElementById("dots")

	function createCarouselItems() {
		testimonials.forEach((testimonial, index) => {
			const item = document.createElement("div")
			item.className = "flex-shrink-0 w-full scroll-snap-align-center p-4"
			item.innerHTML = ` 	
					<div class="flex flex-col items-center justify-center">
						<img src="/testimonials/inverted-comma.svg" alt="Inverted Comma" class="w-16 h-8 mx-auto mb-8" />
                    	<p class="text-2xl leading-tight mb-8 text-center text-color-primary font-montserrat w-1/2">${testimonial.quote}</p>
                    	<p class="text-lg text-center font-montserrat">${testimonial.name}</p>
					</div>
                `
			carousel.appendChild(item)

			const dot = document.createElement("button")
			dot.className = "w-3 h-3 rounded-full bg-gray-600 mx-1"
			dot.setAttribute("aria-label", `Go to testimonial ${index + 1}`)
			dot.addEventListener("click", () => scrollToIndex(index))
			dotsContainer.appendChild(dot)
		})
	}

	function scrollToIndex(index) {
		const scrollWidth = carousel.scrollWidth
		const itemWidth = scrollWidth / testimonials.length
		carousel.scrollTo({
			left: itemWidth * index,
			behavior: "smooth",
		})
		updateActiveDot(index)
	}

	function updateActiveDot(index) {
		const dots = dotsContainer.getElementsByTagName("button")
		Array.from(dots).forEach((dot, i) => {
			dot.classList.toggle("bg-white", i === index)
			dot.classList.toggle("bg-gray-600", i !== index)
		})
	}

	function handleScroll() {
		const scrollPosition = carousel.scrollLeft
		const itemWidth = carousel.scrollWidth / testimonials.length
		const newIndex = Math.round(scrollPosition / itemWidth)
		if (newIndex !== currentIndex) {
			currentIndex = newIndex
			updateActiveDot(currentIndex)
		}
	}

	document.getElementById("prevBtn").addEventListener("click", () => {
		currentIndex = (currentIndex - 1 + testimonials.length) % testimonials.length
		scrollToIndex(currentIndex)
	})

	document.getElementById("nextBtn").addEventListener("click", () => {
		currentIndex = (currentIndex + 1) % testimonials.length
		scrollToIndex(currentIndex)
	})

	createCarouselItems()
	updateActiveDot(0)
	carousel.addEventListener("scroll", handleScroll)
</script>
